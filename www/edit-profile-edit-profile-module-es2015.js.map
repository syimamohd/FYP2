{"version":3,"sources":["./src/app/edit-profile/edit-profile.page.html","./src/app/edit-profile/edit-profile-routing.module.ts","./src/app/edit-profile/edit-profile.module.ts","./src/app/edit-profile/edit-profile.page.scss","./src/app/edit-profile/edit-profile.page.ts"],"names":[],"mappings":"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","file":"edit-profile-edit-profile-module-es2015.js","sourcesContent":["export default \"<ion-header>\\n    <ion-toolbar color=\\\"dark\\\">\\n        <ion-buttons slot=\\\"start\\\">\\n            <ion-back-button icon=\\\"arrow-back-outline\\\"></ion-back-button>\\n          </ion-buttons>\\n      <ion-title>Edit Profile</ion-title>\\n      <ion-buttons size=\\\"medium\\\" slot=\\\"end\\\" (click)=\\\"onLogout()\\\">\\n          <ion-icon name=\\\"exit-outline\\\"></ion-icon>\\n        </ion-buttons>\\n        \\n    </ion-toolbar>\\n  </ion-header>\\n  \\n  <ion-content padding>\\n  \\n    <!-- <app-loading *ngIf=\\\"busy\\\"></app-loading> --> \\n    <ion-grid>\\n  \\n    <div *ngIf=\\\"!busy\\\">\\n  \\n      <input type=\\\"file\\\" #fileBtn class=\\\"filebtn\\\" (change)=\\\"uploadPic($event)\\\" />\\n  \\n      <div>\\n        <ion-img class=\\\"profile-pic\\\" src=\\\"https://ucarecdn.com/{{ profilePic }}/-/scale_crop/150x150/center/\\\"></ion-img>\\n        <ion-button  (click)=\\\"updateProfilePic()\\\">Change</ion-button>\\n      </div>\\n  \\n      <div class=\\\"profile-info\\\">\\n        <ion-item>\\n          <ion-label position=\\\"floating\\\">Username</ion-label>\\n          <ion-input [(ngModel)]=\\\"username\\\"></ion-input>\\n        </ion-item>\\n  \\n        <ion-item>\\n          <ion-label position=\\\"floating\\\">New Password?</ion-label>\\n          <ion-input [(ngModel)]=\\\"newpassword\\\"></ion-input>\\n        </ion-item>\\n  \\n        <ion-item>\\n          <ion-label position=\\\"floating\\\">Enter old password</ion-label>\\n          <ion-input [(ngModel)]=\\\"password\\\"></ion-input>\\n        </ion-item>\\n\\n        <!-- <ion-item>\\n            <ion-label position=\\\"floating\\\">Enter Contact Number</ion-label>\\n            <ion-input [(ngModel)]=\\\"contact\\\"></ion-input>\\n        </ion-item>\\n\\n          <ion-item>\\n              <ion-label position=\\\"floating\\\">Enter New Address</ion-label>\\n              <ion-input [(ngModel)]=\\\"address\\\"></ion-input>\\n            </ion-item> -->\\n  \\n        <ion-button fill=\\\"solid\\\" expand=\\\"block\\\" color=\\\"dark\\\" (click)=\\\"updateDetails()\\\">Save</ion-button>\\n      </div>\\n    </div>\\n  </ion-grid>\\n  </ion-content>\"","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { EditProfilePage } from './edit-profile.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: EditProfilePage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class EditProfilePageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { EditProfilePageRoutingModule } from './edit-profile-routing.module';\n\nimport { EditProfilePage } from './edit-profile.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    EditProfilePageRoutingModule\n  ],\n  declarations: [EditProfilePage]\n})\nexport class EditProfilePageModule {}\n","export default \".filebtn {\\n  opacity: 0;\\n  position: absolute;\\n  top: -100em;\\n  left: -100em; }\\n\\n.profile-pic {\\n  width: 200px;\\n  height: 200px; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvZWRpdC1wcm9maWxlL0M6XFxVc2Vyc1xcaXJzeWFcXERlc2t0b3BcXEZZUDItbWFzdGVyL3NyY1xcYXBwXFxlZGl0LXByb2ZpbGVcXGVkaXQtcHJvZmlsZS5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDQyxVQUFVO0VBQ1Ysa0JBQWtCO0VBQ2xCLFdBQVc7RUFDWCxZQUFZLEVBQUE7O0FBR2I7RUFDQyxZQUFZO0VBQ1osYUFBYSxFQUFBIiwiZmlsZSI6InNyYy9hcHAvZWRpdC1wcm9maWxlL2VkaXQtcHJvZmlsZS5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIuZmlsZWJ0biB7XG5cdG9wYWNpdHk6IDA7XG5cdHBvc2l0aW9uOiBhYnNvbHV0ZTtcblx0dG9wOiAtMTAwZW07XG5cdGxlZnQ6IC0xMDBlbTtcbn1cblxuLnByb2ZpbGUtcGljIHtcblx0d2lkdGg6IDIwMHB4O1xuXHRoZWlnaHQ6IDIwMHB4O1xufSJdfQ== */\"","import { Component, OnInit, ViewChild } from '@angular/core';\nimport { Http } from '@angular/http';\nimport { AngularFirestore, AngularFirestoreDocument } from '@angular/fire/firestore';\nimport { UserService } from '../user.service';\nimport { AlertController } from '@ionic/angular';\nimport { Router } from '@angular/router';\n\n@Component({\n\tselector: 'app-edit-profile',\n\ttemplateUrl: './edit-profile.page.html',\n\tstyleUrls: ['./edit-profile.page.scss'],\n})\n\nexport class EditProfilePage implements OnInit \n{\n\n\tmainuser: AngularFirestoreDocument\n\tsub\n\tusername: string\n\tprofilePic: string\n\n\tpassword: string\n  \tnewpassword: string\n  \n  \tcontact: string;\n\taddress: string;\n\n\tbusy: boolean = false\n\n  @ViewChild('fileBtn', {static: false}) fileBtn: \n  {\n\t\tnativeElement: HTMLInputElement\n\t}\n\n  constructor\n  (\n\t\tprivate http: Http, \n\t\tprivate afs: AngularFirestore,\n\t\tprivate router: Router,\n\t\tprivate alertController: AlertController,\n    \tprivate user: UserService\n    ) \n    {\n      this.mainuser = afs.doc(`users/${user.getUID()}`)\n      this.sub = this.mainuser.valueChanges().subscribe(event => \n      {\n        this.username = event.username\n        this.profilePic = event.profilePic\n        this.contact = event.contact\n        this.address = event.address\n\t\t  })\n\t}\n\n\tngOnInit() {}\n\n  \tngOnDestroy() \n  \t{\n\t\tthis.sub.unsubscribe()\n\t}\n\n  \tupdateProfilePic() \n  \t{\n\t\tthis.fileBtn.nativeElement.click()\n\t}\n\n\tuploadPic(event) \n\t{\n\t\t\tconst files = event.target.files\n\n\t\t\tconst data = new FormData()\n\t\t\tdata.append('file', files[0])\n\t\t\tdata.append('UPLOADCARE_STORE', '1')\n\t\t\tdata.append('UPLOADCARE_PUB_KEY', '00f055ada25dcea69cac')\n\n\t\t\t\n\t\t\tthis.http.post('https://upload.uploadcare.com/base/', data)\n\t\t\t.subscribe(event => {\n\t\t\t\tconst uuid = event.json().file\n\t\t\t\tthis.mainuser.update({\n\t\t\t\t\tprofilePic: uuid\n\t\t\t\t})\n\t\t\t})\n\t\t}\n\n  async presentAlert(title: string, content: string) \n  {\n\t\tconst alert = await this.alertController.create({\n\t\t\theader: title,\n\t\t\tmessage: content,\n\t\t\tbuttons: ['OK']\n\t\t})\n\n\t\tawait alert.present()\n\t}\n\n  async updateDetails() \n  {\n\t\tthis.busy = true\n\n\t\tif(!this.password) {\n\t\t\tthis.busy = false\n\t\t\treturn this.presentAlert('Error!', 'You have to enter a password')\n\t\t}\n\n\t\ttry {\n\t\t\tawait this.user.reAuth(this.user.getUsername(), this.password)//, this.user.getContact(), this.user.getAddress()\n\t\t} catch(error) {\n\t\t\tthis.busy = false\n\t\t\treturn this.presentAlert('Error!', 'Wrong password!')\n\t\t}\n\n    if(this.newpassword) \n    {\n\t\t\tawait this.user.updatePassword(this.newpassword)\n\t\t}\n\n    if(this.username !== this.user.getUsername()) \n    {\n\t\t\tawait this.user.updateEmail(this.username)\n\t\t\tthis.mainuser.update({\n\t\t\t\tusername: this.username\n\t\t\t})\n    }\n    \n    // if(this.address !== this.user.getAddress()) \n    // {\n\t\t// \tawait this.user.updateEmail(this.address)\n\t\t// \tthis.mainuser.update({\n\t\t// \t\taddress: this.address\n\t\t// \t})\n\t\t// }\n\n\t\tthis.password = \"\"\n\t\tthis.newpassword = \"\"\n\t\tthis.contact = \"\"\n\t\tthis.address = \"\"\n\t\tthis.busy = false\n\n\t\tawait this.presentAlert('Done!', 'Your profile was updated!')\n\n\t\tthis.router.navigate(['/view-profile'])\n\t}\n\n\t\n\n}"],"sourceRoot":"webpack:///"}