{"version":3,"sources":["src/app/edit-profile/edit-profile.page.html","src/app/edit-profile/edit-profile-routing.module.ts","src/app/edit-profile/edit-profile.module.ts","src/app/edit-profile/edit-profile.page.scss","src/app/edit-profile/edit-profile.page.ts"],"names":[],"mappings":"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","sourcesContent":["export default \"<ion-header>\\r\\n    <ion-toolbar color=\\\"dark\\\">\\r\\n        <ion-buttons slot=\\\"start\\\">\\r\\n            <ion-back-button icon=\\\"arrow-back-outline\\\"></ion-back-button>\\r\\n          </ion-buttons>\\r\\n      <ion-title>Edit Profile</ion-title>\\r\\n        \\r\\n    </ion-toolbar>\\r\\n  </ion-header>\\r\\n  \\r\\n  <ion-content padding>\\r\\n  \\r\\n    <!-- <app-loading *ngIf=\\\"busy\\\"></app-loading> --> \\r\\n    <ion-grid>\\r\\n  \\r\\n    <div *ngIf=\\\"!busy\\\">\\r\\n  \\r\\n      <input type=\\\"file\\\" #fileBtn class=\\\"filebtn\\\" (change)=\\\"uploadPic($event)\\\" />\\r\\n  \\r\\n      <div>\\r\\n        <ion-img class=\\\"profile-pic\\\" src=\\\"https://ucarecdn.com/{{ profilePic }}/-/scale_crop/150x150/center/\\\"></ion-img>\\r\\n        <ion-button  (click)=\\\"updateProfilePic()\\\">Change</ion-button>\\r\\n      </div>\\r\\n  \\r\\n      <div class=\\\"profile-info\\\">\\r\\n        <ion-item>\\r\\n          <ion-label position=\\\"floating\\\">Username</ion-label>\\r\\n          <ion-input [(ngModel)]=\\\"username\\\"></ion-input>\\r\\n        </ion-item>\\r\\n  \\r\\n        <ion-item>\\r\\n          <ion-label position=\\\"floating\\\">New Password?</ion-label>\\r\\n          <ion-input [(ngModel)]=\\\"newpassword\\\"></ion-input>\\r\\n        </ion-item>\\r\\n  \\r\\n        <ion-item>\\r\\n          <ion-label position=\\\"floating\\\">Enter old password</ion-label>\\r\\n          <ion-input [(ngModel)]=\\\"password\\\"></ion-input>\\r\\n        </ion-item>\\r\\n\\r\\n        <!-- <ion-item>\\r\\n            <ion-label position=\\\"floating\\\">Enter Contact Number</ion-label>\\r\\n            <ion-input [(ngModel)]=\\\"contact\\\"></ion-input>\\r\\n        </ion-item>\\r\\n\\r\\n          <ion-item>\\r\\n              <ion-label position=\\\"floating\\\">Enter New Address</ion-label>\\r\\n              <ion-input [(ngModel)]=\\\"address\\\"></ion-input>\\r\\n            </ion-item> -->\\r\\n  \\r\\n        <ion-button fill=\\\"solid\\\" expand=\\\"block\\\" color=\\\"dark\\\" (click)=\\\"updateDetails()\\\">Save</ion-button>\\r\\n      </div>\\r\\n    </div>\\r\\n  </ion-grid>\\r\\n  </ion-content>\"","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { EditProfilePage } from './edit-profile.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: EditProfilePage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class EditProfilePageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { EditProfilePageRoutingModule } from './edit-profile-routing.module';\n\nimport { EditProfilePage } from './edit-profile.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    EditProfilePageRoutingModule\n  ],\n  declarations: [EditProfilePage]\n})\nexport class EditProfilePageModule {}\n","export default \".filebtn {\\n  opacity: 0;\\n  position: absolute;\\n  top: -100em;\\n  left: -100em;\\n}\\n\\n.profile-pic {\\n  width: 200px;\\n  height: 200px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvZWRpdC1wcm9maWxlL0M6XFxVc2Vyc1xcaXJzeWFcXERlc2t0b3BcXGZ5cDItbWFzdGVyL3NyY1xcYXBwXFxlZGl0LXByb2ZpbGVcXGVkaXQtcHJvZmlsZS5wYWdlLnNjc3MiLCJzcmMvYXBwL2VkaXQtcHJvZmlsZS9lZGl0LXByb2ZpbGUucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0MsVUFBQTtFQUNBLGtCQUFBO0VBQ0EsV0FBQTtFQUNBLFlBQUE7QUNDRDs7QURFQTtFQUNDLFlBQUE7RUFDQSxhQUFBO0FDQ0QiLCJmaWxlIjoic3JjL2FwcC9lZGl0LXByb2ZpbGUvZWRpdC1wcm9maWxlLnBhZ2Uuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIi5maWxlYnRuIHtcblx0b3BhY2l0eTogMDtcblx0cG9zaXRpb246IGFic29sdXRlO1xuXHR0b3A6IC0xMDBlbTtcblx0bGVmdDogLTEwMGVtO1xufVxuXG4ucHJvZmlsZS1waWMge1xuXHR3aWR0aDogMjAwcHg7XG5cdGhlaWdodDogMjAwcHg7XG59IiwiLmZpbGVidG4ge1xuICBvcGFjaXR5OiAwO1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIHRvcDogLTEwMGVtO1xuICBsZWZ0OiAtMTAwZW07XG59XG5cbi5wcm9maWxlLXBpYyB7XG4gIHdpZHRoOiAyMDBweDtcbiAgaGVpZ2h0OiAyMDBweDtcbn0iXX0= */\"","import { Component, OnInit, ViewChild } from '@angular/core';\nimport { Http } from '@angular/http';\nimport { AngularFirestore, AngularFirestoreDocument } from '@angular/fire/firestore';\nimport { UserService } from '../user.service';\nimport { AlertController } from '@ionic/angular';\nimport { Router } from '@angular/router';\n\n@Component({\n\tselector: 'app-edit-profile',\n\ttemplateUrl: './edit-profile.page.html',\n\tstyleUrls: ['./edit-profile.page.scss'],\n})\n\nexport class EditProfilePage implements OnInit \n{\n\n\tmainuser: AngularFirestoreDocument\n\tsub\n\tusername: string\n\tprofilePic: string\n\n\tpassword: string\n  \tnewpassword: string\n  \n  \tcontact: string;\n\taddress: string;\n\n\tbusy: boolean = false\n\n  @ViewChild('fileBtn', {static: false}) fileBtn: \n  {\n\t\tnativeElement: HTMLInputElement\n\t}\n\n  constructor\n  (\n\t\tprivate http: Http, \n\t\tprivate afs: AngularFirestore,\n\t\tprivate router: Router,\n\t\tprivate alertController: AlertController,\n    \tprivate user: UserService\n    ) \n    {\n      this.mainuser = afs.doc(`users/${user.getUID()}`)\n      this.sub = this.mainuser.valueChanges().subscribe(event => \n      {\n        this.username = event.username\n        this.profilePic = event.profilePic\n        this.contact = event.contact\n        this.address = event.address\n\t\t  })\n\t}\n\n\tngOnInit() {}\n\n  \tngOnDestroy() \n  \t{\n\t\tthis.sub.unsubscribe()\n\t}\n\n  \tupdateProfilePic() \n  \t{\n\t\tthis.fileBtn.nativeElement.click()\n\t}\n\n\tuploadPic(event) \n\t{\n\t\t\tconst files = event.target.files\n\n\t\t\tconst data = new FormData()\n\t\t\tdata.append('file', files[0])\n\t\t\tdata.append('UPLOADCARE_STORE', '1')\n\t\t\tdata.append('UPLOADCARE_PUB_KEY', '00f055ada25dcea69cac')\n\n\t\t\t\n\t\t\tthis.http.post('https://upload.uploadcare.com/base/', data)\n\t\t\t.subscribe(event => {\n\t\t\t\tconst uuid = event.json().file\n\t\t\t\tthis.mainuser.update({\n\t\t\t\t\tprofilePic: uuid\n\t\t\t\t})\n\t\t\t})\n\t\t}\n\n  async presentAlert(title: string, content: string) \n  {\n\t\tconst alert = await this.alertController.create({\n\t\t\theader: title,\n\t\t\tmessage: content,\n\t\t\tbuttons: ['OK']\n\t\t})\n\n\t\tawait alert.present()\n\t}\n\n  async updateDetails() \n  {\n\t\tthis.busy = true\n\n\t\tif(!this.password) {\n\t\t\tthis.busy = false\n\t\t\treturn this.presentAlert('Error!', 'You have to enter a password')\n\t\t}\n\n\t\ttry {\n\t\t\tawait this.user.reAuth(this.user.getUsername(), this.password)//, this.user.getContact(), this.user.getAddress()\n\t\t} catch(error) {\n\t\t\tthis.busy = false\n\t\t\treturn this.presentAlert('Error!', 'Wrong password!')\n\t\t}\n\n    if(this.newpassword) \n    {\n\t\t\tawait this.user.updatePassword(this.newpassword)\n\t\t}\n\n    if(this.username !== this.user.getUsername()) \n    {\n\t\t\tawait this.user.updateEmail(this.username)\n\t\t\tthis.mainuser.update({\n\t\t\t\tusername: this.username\n\t\t\t})\n    }\n    \n    // if(this.address !== this.user.getAddress()) \n    // {\n\t\t// \tawait this.user.updateEmail(this.address)\n\t\t// \tthis.mainuser.update({\n\t\t// \t\taddress: this.address\n\t\t// \t})\n\t\t// }\n\n\t\tthis.password = \"\"\n\t\tthis.newpassword = \"\"\n\t\tthis.contact = \"\"\n\t\tthis.address = \"\"\n\t\tthis.busy = false\n\n\t\tawait this.presentAlert('Done!', 'Your profile was updated!')\n\n\t\tthis.router.navigate(['/view-profile'])\n\t}\n\n\t\n\n}"],"sourceRoot":"webpack:///","file":"edit-profile-edit-profile-module-es5.js"}